# Tool to test grott data processing.
# Updated: 2021-07-21

verrel = "2.6.1"

import os
import sys

sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), "..")))

from grottconf import Conf
from grottdata import procdata

# proces config file
conf = Conf(verrel)

# print configuration
if conf.verbose:
    conf.print()

# Specify overwrite .ini data
conf.nomqtt = True

# growatt datarecord
xdata = "00320006010101040d222c4559454c74412d7761747447726f7761747447726f7761747447723e3a23464c75415d4150747447726f7761747447726f7761747447726f7774767d4b7c65756174746b726e776161064e776f6061746135726f7761747447726f7772cf67ce7b2a7774747454c96f7761747447726f7761747447726f7761747452726fd0d97796a77e6e7a61747447726f7761747447726f77617474477ce977617474475f6f2e2f547447726f776174624772df4161747447726f77617474f7446f7761747447726f7761747447726f7761747447726f7761747447786f776b287d457a9777607eb407066ef46ff37652 7ce87762747747656f7761747447726f6d03"

data = bytes.fromhex(xdata)
procdata(conf, data)
